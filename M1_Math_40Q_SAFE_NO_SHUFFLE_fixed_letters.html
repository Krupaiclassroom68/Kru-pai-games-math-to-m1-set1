<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<!-- build: SAFE-NO-SHUFFLE v1 -->
<title>‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå ‡∏°.1 ‚Äì ‡∏™‡∏°‡∏Å‡∏≤‡∏£¬∑‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô¬∑‡∏£‡πâ‡∏≠‡∏¢‡∏•‡∏∞¬∑‡πÄ‡∏®‡∏©‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏•‡∏∞‡∏ó‡∏®‡∏ô‡∏¥‡∏¢‡∏° (40 ‡∏Ç‡πâ‡∏≠) ¬∑ Instant Reveal</title>
<style>
  :root{--blue:#1e40af; --blue2:#2563eb; --bg:#0b1220; --muted:#cbd5e1; --text:#e2e8f0; --accent:#facc15; --ok:#22c55e; --bad:#ef4444;}
  *{box-sizing:border-box}
  body{margin:0; font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Noto Sans Thai", "Sarabun", Roboto, Arial; color:var(--text);
    background: radial-gradient(1200px 600px at -10% -10%, #0b3a7a55, transparent 60%), radial-gradient(1000px 500px at 110% 0%, #0ea5e955, transparent 60%), linear-gradient(180deg, #0b1220, #0a1020); min-height:100dvh;}
  header{position:sticky; top:0; z-index:10; background:linear-gradient(90deg, var(--blue), var(--blue2)); color:white; border-bottom:3px solid var(--accent); box-shadow:0 8px 24px rgba(0,0,0,.25);}
  .wrap{max-width:960px; margin:0 auto; padding:14px 18px; display:flex; align-items:center; gap:12px}
  .logo{width:44px; height:44px; border-radius:12px; background: radial-gradient(circle at 30% 30%, #fde68a, var(--accent)); display:grid; place-items:center; color:#111; font-weight:900;}
  h1{font-size:clamp(18px,2.8vw,28px); margin:0;} .subtitle{font-size:clamp(12px,2vw,14px); opacity:.9; margin-top:2px}
  main{max-width:960px; margin:22px auto; padding:0 16px 40px}
  .card{background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.01)); border:1px solid rgba(255,255,255,.08); box-shadow: 0 12px 40px rgba(2,6,23,.6); border-radius:18px; padding:18px; backdrop-filter: blur(6px);}
  .hero{display:grid; gap:16px; padding:28px; background:linear-gradient(180deg, #0b1a3a, #0d1730); border:1px solid rgba(255,255,255,.08); border-radius:20px;}
  .title{font-size:clamp(20px,3vw,30px); font-weight:800}
  .tag{display:inline-flex; align-items:center; gap:8px; padding:6px 10px; border-radius:999px; background:rgba(250,204,21,.15); color:var(--accent); border:1px solid rgba(250,204,21,.35); font-weight:700;}
  .row{display:flex; gap:14px; flex-wrap:wrap; align-items:center}
  input[type='text']{background:#0b1220; color:var(--text); border:2px solid #1f2b46; border-radius:12px; padding:12px 14px; width:min(520px, 100%); outline:none; font-size:16px;}
  input[type='text']:focus{border-color:var(--blue2); box-shadow:0 0 0 4px rgba(37,99,235,.25)}
  .btn{appearance:none; border:none; cursor:pointer; padding:12px 18px; border-radius:12px; font-weight:800; letter-spacing:.3px; transition:transform .06s ease, box-shadow .12s ease, filter .12s ease; display:inline-flex; align-items:center; gap:10px;}
  .btn:active{transform:translateY(1px)} .btn-primary{background:linear-gradient(180deg, var(--accent), #f59e0b); color:#111; box-shadow:0 8px 18px rgba(250,204,21,.35);} .btn-ghost{background:transparent; color:var(--muted); border:2px dashed rgba(255,255,255,.3)}
  .info{color:var(--muted); font-size:14px} .hidden{display:none !important}
  .q-head{display:flex; justify-content:space-between; align-items:center; gap:10px; padding:8px 4px 16px}
  .progress{width:100%; height:12px; background:#0b1220; border-radius:999px; overflow:hidden; border:1px solid rgba(255,255,255,.08);} .progress>div{height:100%; background:linear-gradient(90deg, var(--accent), #fde047); width:0%; transition:width .4s ease;}
  .question{font-size:clamp(16px,2.6vw,20px); font-weight:700; line-height:1.45; padding:8px 0 6px;}
  .choices{display:grid; gap:12px; margin-top:10px} .choice{border:2px solid rgba(250,204,21,.25); background:rgba(250,204,21,.06); color:var(--text); padding:12px 14px; border-radius:14px; cursor:pointer; position:relative; transition: border-color .15s ease, background .15s ease, transform .06s ease; display:flex; align-items:flex-start; gap:10px;}
  .choice:hover{border-color:var(--accent)} .choice input{position:absolute; inset:0; opacity:0; cursor:pointer} .choice .label{font-weight:800; color:var(--accent)}
  .choice.selected{background:rgba(250,204,21,.18); border-color:var(--accent); box-shadow:0 0 0 4px rgba(250,204,21,.15) inset; transform:translateY(1px);}
  /* New: lock and result styles */
  .choices.locked .choice{pointer-events:none; opacity:0.98}
  .choice.correct{border-color:rgba(34,197,94,.7); background:rgba(34,197,94,.12)}
  .choice.wrong{border-color:rgba(239,68,68,.7); background:rgba(239,68,68,.10)}
  .reveal{margin-top:10px; padding:10px 12px; border-radius:12px; border:1px solid rgba(255,255,255,.12); background:rgba(255,255,255,.04); font-size:14px; color:var(--muted)}
  .reveal .right{color:var(--ok); font-weight:800}
  .reveal .wrong{color:var(--bad); font-weight:800}
  .nav{display:flex; justify-content:space-between; align-items:center; gap:10px; margin-top:16px}
  .btn-next{background:linear-gradient(180deg, var(--blue2), #1d4ed8); color:white; box-shadow:0 8px 18px rgba(37,99,235,.35);} .btn-prev{background:transparent; color:var(--text); border:2px solid rgba(255,255,255,.2)} .btn-next:disabled{opacity:.5; pointer-events:none; filter:grayscale(.6)}
  .pill{padding:6px 10px; border-radius:999px; background:rgba(59,130,246,.18); border:1px solid rgba(59,130,246,.35); color:#dbeafe; font-weight:700;}
  .score{display:grid; place-items:center; gap:10px; padding:20px; text-align:center} .score .big{font-size:clamp(42px,6vw,72px); font-weight:900; color:var(--accent)} .score .pass{color:var(--ok); font-weight:900} .score .fail{color:var(--bad); font-weight:900}
  .review{display:grid; gap:14px; margin-top:12px} .review-item{border:1px solid rgba(255,255,255,.08); background:rgba(255,255,255,.03); border-radius:12px; padding:12px 14px}
  .badge{display:inline-block; padding:4px 10px; border-radius:999px; font-weight:800; font-size:12px; margin-left:8px;} .good{background:rgba(34,197,94,.15); border:1px solid rgba(34,197,94,.35); color:#bbf7d0} .bad{background:rgba(239,68,68,.15); border:1px solid rgba(239,68,68,.35); color:#fecaca}
  .ans-line{font-size:14px; color:var(--muted); margin-top:6px}
  .footer{margin-top:28px; display:flex; justify-content:space-between; align-items:center; gap:10px; flex-wrap:wrap; color:var(--muted); border-top:1px dashed rgba(255,255,255,.15); padding-top:12px}
</style>
</head>
<body>
<header><div class="wrap"><div class="logo">KP</div><div><h1>Kru Pai Classroom ¬∑ Math Quiz</h1><div class="subtitle">‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå ‡∏°.1 ‚Äî ‡∏™‡∏°‡∏Å‡∏≤‡∏£ ¬∑ ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô ¬∑ ‡∏£‡πâ‡∏≠‡∏¢‡∏•‡∏∞ ¬∑ ‡πÄ‡∏®‡∏©‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏•‡∏∞‡∏ó‡∏®‡∏ô‡∏¥‡∏¢‡∏°</div></div></div></header>
<main>
<section id="screen-start" class="card hero">
  <div class="row" style="justify-content:space-between; align-items:center">
    <div class="title">‡πÄ‡∏Å‡∏°‡∏ó‡∏î‡∏™‡∏≠‡∏ö (40 ‡∏Ç‡πâ‡∏≠)</div>
    <div class="tag">‡∏ß‡∏¥‡∏ä‡∏≤: ‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå</div>
  </div>
  <div class="info">‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö‡∏ó‡∏µ‡∏•‡∏∞‡∏Ç‡πâ‡∏≠ <strong>‡∏Å‡∏î‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏â‡∏•‡∏¢‡∏ó‡∏±‡∏ô‡∏ó‡∏µ</strong> ‡∏°‡∏µ‡∏™‡∏£‡∏∏‡∏õ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÅ‡∏•‡∏∞‡πÄ‡∏â‡∏•‡∏¢‡∏ó‡πâ‡∏≤‡∏¢‡πÄ‡∏Å‡∏°</div>
  <div class="row">
    <input id="playerName" type="text" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏° (‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: ‡∏°‡∏¥‡πâ‡∏ô‡∏ó‡πå)" />
    <button class="btn btn-primary" id="btnStart">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö</button>
  </div>
</section>
<section id="screen-quiz" class="card hidden">
  <div class="q-head">
    <div class="pill" id="pillPlayer">üë©‚Äçüéì ‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô: -</div>
    <div class="pill" id="pillCount">‡∏Ç‡πâ‡∏≠ <span id="qNumber">1</span>/<span id="qTotal">40</span></div>
  </div>
  <div class="progress"><div id="bar"></div></div>
  <div class="question" id="qText"></div>
  <div class="choices" id="choices"></div>
  <div id="instantReveal" class="reveal hidden"></div>
  <div class="nav">
    <button class="btn btn-prev" id="btnPrev">‡∏Ç‡πâ‡∏≠‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤</button>
    <div style="display:flex; gap:10px">
      <button class="btn btn-ghost" id="btnClear">‡∏•‡πâ‡∏≤‡∏á‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏ô‡∏µ‡πâ</button>
      <button class="btn btn-next" id="btnNext" disabled>‡πÑ‡∏õ‡∏Ç‡πâ‡∏≠‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</button>
    </div>
  </div>
</section>
<section id="screen-result" class="card hidden">
  <div class="score">
    <div class="title">‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</div>
    <div class="big" id="scoreText">0/40</div>
    <div id="passText" class="pass hidden">‡∏ú‡πà‡∏≤‡∏ô üéâ ‡πÄ‡∏Å‡πà‡∏á‡∏°‡∏≤‡∏Å!</div>
    <div id="failText" class="fail hidden">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô ‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ô‡∏∞ ‚ú®</div>
    <div class="row" style="justify-content:center">
      <button class="btn btn-primary" id="btnReview">‡∏î‡∏π‡πÄ‡∏â‡∏•‡∏¢‡πÉ‡∏ï‡πâ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Ç‡πâ‡∏≠</button>
      <button class="btn btn-ghost" id="btnRestart">‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</button>
    </div>
  </div>
  <div id="reviewPanel" class="review hidden"></div>
  <div class="footer"><div>¬© Kru Pai Classroom ¬∑ ‡∏ß‡∏¥‡∏ä‡∏≤: ‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå</div><div>Tip: ‡∏Å‡∏î ‚Äú‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å‚Äù ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô</div></div>
</section>
</main>
<script>
// --- Data (same as original) ---
const QUESTIONS = [{"q": "‡πÅ‡∏Å‡πâ‡∏™‡∏°‡∏Å‡∏≤‡∏£ 2x + 7 = 21", "c": ["5", "6", "7", "8"], "a": 2, "cat": "‡∏™‡∏°‡∏Å‡∏≤‡∏£ (Equations)"}, {"q": "‡∏ñ‡πâ‡∏≤ 3x - 4 = 2x + 5 ‡∏Ñ‡πà‡∏≤ x ‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ö‡πÄ‡∏ó‡πà‡∏≤‡πÉ‡∏î", "c": ["1", "5", "9", "-1"], "a": 2, "cat": "‡∏™‡∏°‡∏Å‡∏≤‡∏£ (Equations)"}, {"q": "‡πÅ‡∏Å‡πâ‡∏™‡∏°‡∏Å‡∏≤‡∏£ x/4 + 3 = 8", "c": ["12", "20", "24", "28"], "a": 1, "cat": "‡∏™‡∏°‡∏Å‡∏≤‡∏£ (Equations)"}, {"q": "‡∏™‡∏°‡∏Å‡∏≤‡∏£‡πÉ‡∏î‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö x = -2 ‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠", "c": ["2x + 4 = 0", "x - 3 = 5", "3x + 2 = 4", "x + 2 = 2"], "a": 0, "cat": "‡∏™‡∏°‡∏Å‡∏≤‡∏£ (Equations)"}, {"q": "‡∏ú‡∏•‡∏ö‡∏ß‡∏Å‡∏Ç‡∏≠‡∏á‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏≠‡∏á‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏∑‡∏≠ 50 ‡∏ú‡∏•‡∏ï‡πà‡∏≤‡∏á‡∏Ñ‡∏∑‡∏≠ 10 ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡∏Ñ‡∏∑‡∏≠‚Ä¶", "c": ["25", "30", "35", "40"], "a": 1, "cat": "‡∏™‡∏°‡∏Å‡∏≤‡∏£ (Equations)"}, {"q": "‡∏ú‡∏•‡∏Ñ‡∏π‡∏ì‡∏Ç‡∏≠‡∏á‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏Å‡∏±‡∏ö 7 ‡∏°‡∏µ‡∏Ñ‡πà‡∏≤‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ö 63 ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ô‡∏±‡πâ‡∏ô‡∏Ñ‡∏∑‡∏≠‚Ä¶", "c": ["7", "8", "9", "10"], "a": 2, "cat": "‡∏™‡∏°‡∏Å‡∏≤‡∏£ (Equations)"}, {"q": "‡πÅ‡∏Å‡πâ‡∏™‡∏°‡∏Å‡∏≤‡∏£ 5(x - 2) = 3x + 4", "c": ["4", "7", "9", "14"], "a": 1, "cat": "‡∏™‡∏°‡∏Å‡∏≤‡∏£ (Equations)"}, {"q": "‡∏ñ‡πâ‡∏≤ 2x + y = 10 ‡πÅ‡∏•‡∏∞ x + y = 7 ‡∏Ñ‡πà‡∏≤ x ‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ö‡πÄ‡∏ó‡πà‡∏≤‡πÉ‡∏î", "c": ["2", "3", "4", "5"], "a": 1, "cat": "‡∏™‡∏°‡∏Å‡∏≤‡∏£ (Equations)"}, {"q": "‡∏™‡∏°‡∏Å‡∏≤‡∏£‡πÉ‡∏î‡∏°‡∏µ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö x = 6", "c": ["x + 2 = 10", "2x - 3 = 9", "x/2 = 2", "3x = 12"], "a": 1, "cat": "‡∏™‡∏°‡∏Å‡∏≤‡∏£ (Equations)"}, {"q": "‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡∏™‡∏≠‡∏á‡πÄ‡∏ó‡πà‡∏≤‡∏Ç‡∏≠‡∏á‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏´‡∏ô‡∏∂‡πà‡∏á 5 ‡∏´‡∏ô‡πà‡∏ß‡∏¢ ‡∏Ñ‡∏∑‡∏≠ 19 ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ô‡∏±‡πâ‡∏ô‡∏Ñ‡∏∑‡∏≠‚Ä¶", "c": ["10", "12", "14", "16"], "a": 1, "cat": "‡∏™‡∏°‡∏Å‡∏≤‡∏£ (Equations)"}, {"q": "‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô‡∏Ç‡∏≠‡∏á 12 ‡∏ï‡πà‡∏≠ 18 ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏£‡∏π‡∏õ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ï‡πà‡∏≥", "c": ["2:3", "3:5", "4:7", "6:9"], "a": 0, "cat": "‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏•‡∏∞‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô (Ratios & Proportion)"}, {"q": "‡∏ñ‡πâ‡∏≤‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡πá‡∏Å‡∏ä‡∏≤‡∏¢‡∏ï‡πà‡∏≠‡πÄ‡∏î‡πá‡∏Å‡∏´‡∏ç‡∏¥‡∏á‡∏Ñ‡∏∑‡∏≠ 5:7 ‡πÅ‡∏•‡∏∞‡∏°‡∏µ‡πÄ‡∏î‡πá‡∏Å‡∏´‡∏ç‡∏¥‡∏á 21 ‡∏Ñ‡∏ô ‡πÄ‡∏î‡πá‡∏Å‡∏ä‡∏≤‡∏¢‡∏°‡∏µ‡∏Å‡∏µ‡πà‡∏Ñ‡∏ô", "c": ["10", "12", "15", "20"], "a": 2, "cat": "‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏•‡∏∞‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô (Ratios & Proportion)"}, {"q": "‡∏ô‡πâ‡∏≥‡∏ú‡∏•‡πÑ‡∏°‡πâ‡∏ú‡∏™‡∏°‡πÉ‡∏ô‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô 2:5 ‡∏ñ‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏ô‡πâ‡∏≥‡∏ú‡∏•‡πÑ‡∏°‡πâ 6 ‡∏•‡∏¥‡∏ï‡∏£ ‡∏à‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏ô‡πâ‡∏≥‡∏Å‡∏µ‡πà‡∏•‡∏¥‡∏ï‡∏£", "c": ["12", "15", "18", "20"], "a": 1, "cat": "‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏•‡∏∞‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô (Ratios & Proportion)"}, {"q": "‡∏Ñ‡πà‡∏≤ x ‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô 3/5 = x/20 ‡πÄ‡∏õ‡πá‡∏ô‡∏à‡∏£‡∏¥‡∏á‡∏Ñ‡∏∑‡∏≠‚Ä¶", "c": ["8", "10", "12", "15"], "a": 2, "cat": "‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏•‡∏∞‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô (Ratios & Proportion)"}, {"q": "‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô‡πÉ‡∏î ‚Äú‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‚Äù", "c": ["2:3 = 4:6", "5:8 = 10:16", "6:9 = 10:12", "7:14 = 1:2"], "a": 2, "cat": "‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏•‡∏∞‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô (Ratios & Proportion)"}, {"q": "‡∏ñ‡πâ‡∏≤‡∏™‡πà‡∏ß‡∏ô‡∏ú‡∏™‡∏°‡πÅ‡∏õ‡πâ‡∏á‡∏Å‡∏±‡∏ö‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏•‡πÄ‡∏õ‡πá‡∏ô 5:2 ‡πÉ‡∏ä‡πâ‡πÅ‡∏õ‡πâ‡∏á 25 ‡∏Å‡∏¥‡πÇ‡∏•‡∏Å‡∏£‡∏±‡∏° ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏•‡∏Å‡∏µ‡πà‡∏Å‡∏¥‡πÇ‡∏•‡∏Å‡∏£‡∏±‡∏°", "c": ["8", "9", "10", "12"], "a": 2, "cat": "‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏•‡∏∞‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô (Ratios & Proportion)"}, {"q": "36:48 ‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ö‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô‡πÉ‡∏î‡πÉ‡∏ô‡∏£‡∏π‡∏õ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ï‡πà‡∏≥", "c": ["3:4", "6:8", "9:12", "12:16"], "a": 0, "cat": "‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏•‡∏∞‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô (Ratios & Proportion)"}, {"q": "‡∏ú‡∏•‡∏£‡∏ß‡∏°‡∏Ç‡∏≠‡∏á‡∏™‡∏≠‡∏á‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô 2:3 ‡∏ñ‡πâ‡∏≤‡∏ú‡∏•‡∏£‡∏ß‡∏°‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ö 50 ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡∏Ñ‡∏∑‡∏≠‚Ä¶", "c": ["20", "25", "30", "35"], "a": 2, "cat": "‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏•‡∏∞‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô (Ratios & Proportion)"}, {"q": "‡πÉ‡∏ô‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏°‡∏µ‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ä‡∏≤‡∏¢ 12 ‡∏Ñ‡∏ô ‡∏´‡∏ç‡∏¥‡∏á 18 ‡∏Ñ‡∏ô ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô‡∏ä‡∏≤‡∏¢‡∏ï‡πà‡∏≠‡∏´‡∏ç‡∏¥‡∏á‡∏Ñ‡∏∑‡∏≠‚Ä¶", "c": ["2:3", "3:2", "1:2", "2:5"], "a": 0, "cat": "‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏•‡∏∞‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô (Ratios & Proportion)"}, {"q": "‡∏ñ‡πâ‡∏≤ 4x : 5 = 12 : 15 ‡πÅ‡∏•‡πâ‡∏ß x ‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ö‚Ä¶", "c": ["1", "4", "5", "6"], "a": 0, "cat": "‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏•‡∏∞‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô (Ratios & Proportion)"}, {"q": "‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏£‡∏≤‡∏Ñ‡∏≤ 500 ‡∏ö‡∏≤‡∏ó ‡∏•‡∏î‡∏£‡∏≤‡∏Ñ‡∏≤ 20% ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏Å‡∏µ‡πà‡∏ö‡∏≤‡∏ó", "c": ["400", "420", "440", "450"], "a": 0, "cat": "‡∏£‡πâ‡∏≠‡∏¢‡∏•‡∏∞ (Percentage)"}, {"q": "‡∏ñ‡πâ‡∏≤‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏´‡∏ô‡∏∂‡πà‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏∂‡πâ‡∏ô‡∏à‡∏≤‡∏Å 80 ‡πÄ‡∏õ‡πá‡∏ô 100 ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏∂‡πâ‡∏ô‡∏Å‡∏µ‡πà‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå", "c": ["15%", "20%", "22%", "25%"], "a": 3, "cat": "‡∏£‡πâ‡∏≠‡∏¢‡∏•‡∏∞ (Percentage)"}, {"q": "‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÅ‡∏´‡πà‡∏á‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏°‡∏µ‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô 600 ‡∏Ñ‡∏ô ‡∏ä‡∏≤‡∏¢‡∏Ñ‡∏¥‡∏î‡πÄ‡∏õ‡πá‡∏ô 40% ‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ä‡∏≤‡∏¢‡∏°‡∏µ‡∏Å‡∏µ‡πà‡∏Ñ‡∏ô", "c": ["200", "220", "240", "260"], "a": 2, "cat": "‡∏£‡πâ‡∏≠‡∏¢‡∏•‡∏∞ (Percentage)"}, {"q": "‡πÄ‡∏á‡∏¥‡∏ô 1,000 ‡∏ö‡∏≤‡∏ó ‡∏ù‡∏≤‡∏Å‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡πÑ‡∏î‡πâ‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢ 3% ‡∏ï‡πà‡∏≠‡∏õ‡∏µ 1 ‡∏õ‡∏µ ‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡πÄ‡∏ó‡πà‡∏≤‡πÉ‡∏î", "c": ["20", "25", "30", "40"], "a": 2, "cat": "‡∏£‡πâ‡∏≠‡∏¢‡∏•‡∏∞ (Percentage)"}, {"q": "‡∏Ç‡πâ‡∏≤‡∏ß 25 ‡∏Å‡∏¥‡πÇ‡∏•‡∏Å‡∏£‡∏±‡∏° ‡∏°‡∏µ‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏•‡∏î‡∏•‡∏á 8% ‡∏à‡∏∞‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏Å‡∏µ‡πà‡∏Å‡∏¥‡πÇ‡∏•‡∏Å‡∏£‡∏±‡∏°", "c": ["21", "22", "23", "24"], "a": 2, "cat": "‡∏£‡πâ‡∏≠‡∏¢‡∏•‡∏∞ (Percentage)"}, {"q": "‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏™‡∏≠‡∏ö‡πÑ‡∏î‡πâ 45 ‡∏à‡∏≤‡∏Å 60 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô ‡∏Ñ‡∏¥‡∏î‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏µ‡πà‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå", "c": ["70%", "72.5%", "75%", "80%"], "a": 2, "cat": "‡∏£‡πâ‡∏≠‡∏¢‡∏•‡∏∞ (Percentage)"}, {"q": "‡∏£‡∏≤‡∏Ñ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏´‡∏ô‡∏∂‡πà‡∏á 120 ‡∏ö‡∏≤‡∏ó ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏Ñ‡∏≤ 15% ‡∏à‡∏∞‡∏Å‡∏•‡∏≤‡∏¢‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏ó‡πà‡∏≤‡πÉ‡∏î", "c": ["132", "135", "136", "138"], "a": 3, "cat": "‡∏£‡πâ‡∏≠‡∏¢‡∏•‡∏∞ (Percentage)"}, {"q": "‡πÄ‡∏á‡∏¥‡∏ô 500 ‡∏ö‡∏≤‡∏ó ‡πÉ‡∏ä‡πâ‡πÑ‡∏õ 125 ‡∏ö‡∏≤‡∏ó ‡∏Ñ‡∏¥‡∏î‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏µ‡πà‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå‡∏Ç‡∏≠‡∏á‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î", "c": ["20%", "22%", "24%", "25%"], "a": 3, "cat": "‡∏£‡πâ‡∏≠‡∏¢‡∏•‡∏∞ (Percentage)"}, {"q": "‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏£‡∏≤‡∏Ñ‡∏≤ 800 ‡∏ö‡∏≤‡∏ó ‡∏•‡∏î‡∏£‡∏≤‡∏Ñ‡∏≤‡∏û‡∏¥‡πÄ‡∏®‡∏© 30% ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏Ñ‡∏∑‡∏≠‚Ä¶", "c": ["540", "560", "580", "600"], "a": 1, "cat": "‡∏£‡πâ‡∏≠‡∏¢‡∏•‡∏∞ (Percentage)"}, {"q": "‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏°‡∏µ‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î 400 ‡∏Ñ‡∏ô ‡∏ñ‡πâ‡∏≤‡∏™‡∏≠‡∏ö‡∏ú‡πà‡∏≤‡∏ô 85% ‡∏à‡∏∞‡∏°‡∏µ‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏µ‡πà‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏µ‡πà‡∏Ñ‡∏ô", "c": ["330", "340", "345", "360"], "a": 1, "cat": "‡∏£‡πâ‡∏≠‡∏¢‡∏•‡∏∞ (Percentage)"},
{"q": "3/4 + 2/5 = ?", "c": ["19/20", "23/20", "29/20", "31/20"], "a": 1, "cat": "‡πÄ‡∏®‡∏©‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏•‡∏∞‡∏ó‡∏®‡∏ô‡∏¥‡∏¢‡∏° (Fractions & Decimals)"}, {"q": "7/8 - 1/6 = ?", "c": ["13/24", "17/24", "19/24", "23/24"], "a": 1, "cat": "‡πÄ‡∏®‡∏©‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏•‡∏∞‡∏ó‡∏®‡∏ô‡∏¥‡∏¢‡∏° (Fractions & Decimals)"}, {"q": "2/3 √ó 9/10 = ?", "c": ["2/15", "3/5", "4/15", "6/5"], "a": 1, "cat": "‡πÄ‡∏®‡∏©‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏•‡∏∞‡∏ó‡∏®‡∏ô‡∏¥‡∏¢‡∏° (Fractions & Decimals)"}, {"q": "5/6 √∑ 10/9 = ?", "c": ["1/3", "3/4", "5/6", "9/12"], "a": 1, "cat": "‡πÄ‡∏®‡∏©‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏•‡∏∞‡∏ó‡∏®‡∏ô‡∏¥‡∏¢‡∏° (Fractions & Decimals)"}, {"q": "0.25 + 0.75 = ?", "c": ["1.0", "1.25", "1.5", "2.0"], "a": 0, "cat": "‡πÄ‡∏®‡∏©‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏•‡∏∞‡∏ó‡∏®‡∏ô‡∏¥‡∏¢‡∏° (Fractions & Decimals)"}, {"q": "2.4 √ó 0.5 = ?", "c": ["1.0", "1.1", "1.2", "1.5"], "a": 2, "cat": "‡πÄ‡∏®‡∏©‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏•‡∏∞‡∏ó‡∏®‡∏ô‡∏¥‡∏¢‡∏° (Fractions & Decimals)"}, {"q": "6.3 √∑ 0.9 = ?", "c": ["6.5", "7", "7.5", "8"], "a": 1, "cat": "‡πÄ‡∏®‡∏©‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏•‡∏∞‡∏ó‡∏®‡∏ô‡∏¥‡∏¢‡∏° (Fractions & Decimals)"}, {"q": "‡∏ó‡∏≥‡πÉ‡∏´‡πâ 45/60 ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏£‡∏π‡∏õ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ï‡πà‡∏≥", "c": ["2/3", "3/4", "4/5", "5/6"], "a": 1, "cat": "‡πÄ‡∏®‡∏©‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏•‡∏∞‡∏ó‡∏®‡∏ô‡∏¥‡∏¢‡∏° (Fractions & Decimals)"}, {"q": "‡πÅ‡∏õ‡∏•‡∏á 7/20 ‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏£‡∏π‡∏õ‡∏ó‡∏®‡∏ô‡∏¥‡∏¢‡∏°", "c": ["0.25", "0.30", "0.35", "0.40"], "a": 2, "cat": "‡πÄ‡∏®‡∏©‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏•‡∏∞‡∏ó‡∏®‡∏ô‡∏¥‡∏¢‡∏° (Fractions & Decimals)"}, {"q": "1.25 + 2.05 + 3.5 = ?", "c": ["6.7", "6.8", "6.9", "7.0"], "a": 1, "cat": "‡πÄ‡∏®‡∏©‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏•‡∏∞‡∏ó‡∏®‡∏ô‡∏¥‡∏¢‡∏° (Fractions & Decimals)"}];
const EXPLAINS = {
  11: "‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô 12:18 ‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏´‡∏≤‡∏£‡∏î‡πâ‡∏ß‡∏¢ 6 ‡πÑ‡∏î‡πâ 2:3",
  14: "‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ô‡πÄ‡∏ä‡∏¥‡∏á‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô: 3/5 = x/20 ‚áí x = 12",
  15: "6:9 = 2:3 ‡∏™‡πà‡∏ß‡∏ô 10:12 = 5:6 ‡πÑ‡∏°‡πà‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ô",
  21: "‡∏•‡∏î 20% ‡∏Ç‡∏≠‡∏á 500 ‡∏Ñ‡∏∑‡∏≠ 100 ‚Üí 500-100=400",
  26: "45/60 = 0.75 = 75%",
  31: "3/4 + 2/5 = 15/20 + 8/20 = 23/20",
  34: "(5/6) √∑ (10/9) = (5/6)√ó(9/10) = 45/60 = 3/4",
  39: "7/20 = 0.35 (20√ó0.35=7)"
};
let idx=0; const total=QUESTIONS.length; const answers=new Array(total).fill(null);
const $=s=>document.querySelector(s); const ‡∏Å="‡∏Å".charCodeAt(0);
const screenStart=$("#screen-start"), screenQuiz=$("#screen-quiz"), screenResult=$("#screen-result");
const playerNameI=$("#playerName"), btnStart=$("#btnStart"), pillPlayer=$("#pillPlayer");
const qNumber=$("#qNumber"), qTotal=$("#qTotal"), qText=$("#qText"), choicesBox=$("#choices"), bar=$("#bar");
const btnPrev=$("#btnPrev"), btnNext=$("#btnNext"), btnClear=$("#btnClear");
const scoreText=$("#scoreText"), passText=$("#passText"), failText=$("#failText");
const btnReview=$("#btnReview"), btnRestart=$("#btnRestart"), reviewPanel=$("#reviewPanel");
const instantReveal=$("#instantReveal");
qTotal.textContent=total;

function show(el){el.classList.remove("hidden")} function hide(el){el.classList.add("hidden")}
function setProgress(){bar.style.width = Math.round((idx/total)*100)+'%';}
function letter(k){ const L=["‡∏Å","‡∏Ç","‡∏Ñ","‡∏á"]; return L[k]||"?"; }

function renderReveal(item){
  // Render immediate feedback below the choices if already answered
  instantReveal.innerHTML="";
  if(answers[idx]==null){ hide(instantReveal); return; }
  const correct=item.a; const user=answers[idx];
  const ok=user===correct;
  const explain = EXPLAINS[idx+1] ? `<div class="ans-line">‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•: ${EXPLAINS[idx+1]}</div>` : "";
  instantReveal.innerHTML = `<div class="${ok?'right':'wrong'}">${ok?'‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏à‡πâ‡∏≤ ‚úîÔ∏è':'‡∏ú‡∏¥‡∏î‡∏à‡πâ‡∏≤ ‚ùå'}</div>
  <div class="ans-line">‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å: <strong>${letter(correct)}) ${item.c[correct]}</strong></div>${explain}`;
  show(instantReveal);
}

function renderQuestion(){
  const item=QUESTIONS[idx]; 
  qNumber.textContent=idx+1; 
  qText.textContent=(idx+1)+". ["+item.cat+"] "+item.q;
  choicesBox.classList.remove("locked");
  choicesBox.innerHTML="";
  item.c.forEach((text,i)=>{
    const div=document.createElement('label'); 
    const isChosen = answers[idx]===i;
    div.className="choice"+(isChosen?" selected":"");
    div.innerHTML=`<span class="label">${letter(i)}</span> <div>${text}</div><input type="radio" name="c">`;
    div.addEventListener("click",()=>{
      // If already locked, ignore
      if(choicesBox.classList.contains("locked")) return;
      answers[idx]=i; 
      // visual select
      [...choicesBox.children].forEach(ch=>ch.classList.remove("selected","correct","wrong"));
      div.classList.add("selected");
      // check
      const correct=item.a;
      if(i===correct){
        div.classList.add("correct");
      }else{
        div.classList.add("wrong");
        // also highlight the correct choice
        if(choicesBox.children[correct]) choicesBox.children[correct].classList.add("correct");
      }
      // lock further clicks
      choicesBox.classList.add("locked");
      // enable Next
      btnNext.disabled=false;
      // show reveal
      renderReveal(item);
    });
    choicesBox.appendChild(div);
  }); 
  // If answered previously, lock and show states
  if(answers[idx]!=null){
    const user=answers[idx], correct=item.a;
    if(choicesBox.children[user]) choicesBox.children[user].classList.add(user===correct?"correct":"wrong","selected");
    if(choicesBox.children[correct]) choicesBox.children[correct].classList.add("correct");
    choicesBox.classList.add("locked");
    btnNext.disabled=false;
  }else{
    btnNext.disabled=false;
  }
  setProgress();
  renderReveal(item);
}

btnStart.addEventListener("click",()=>{
  const name=playerNameI.value.trim()||"‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏ô‡πÄ‡∏Å‡πà‡∏á"; 
  localStorage.setItem("kp_name_ratio",name); 
  pillPlayer.textContent="üë©‚Äçüéì ‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô: "+name; 
  idx=0; 
  show(screenQuiz); hide(screenStart); hide(screenResult); 
  renderQuestion(); window.scrollTo({top:0,behavior:"smooth"});
});
const saved=localStorage.getItem("kp_name_ratio"); if(saved){playerNameI.value=saved}

btnNext.addEventListener("click",()=>{ 
  if(idx<total-1){ idx++; renderQuestion(); } 
  else { 
    let score=0; 
    for(let i=0;i<total;i++){ if(answers[i]===QUESTIONS[i].a) score++; } 
    scoreText.textContent=`${score}/${total}`; 
    if(score>=Math.ceil(total*0.8)){show(passText); hide(failText);} else {hide(passText); show(failText);} 
    hide(screenQuiz); show(screenResult); window.scrollTo({top:0,behavior:"smooth"});
  } 
});

btnPrev.addEventListener("click",()=>{ if(idx>0){ idx--; renderQuestion(); }});
btnClear.addEventListener("click",()=>{ 
  answers[idx]=null; 
  instantReveal.innerHTML=""; hide(instantReveal);
  renderQuestion(); 
});
btnReview.addEventListener("click",()=>{
  reviewPanel.innerHTML=""; 
  QUESTIONS.forEach((item,i)=>{
    const wrap=document.createElement('div'); 
    const correct=item.a; 
    const user=answers[i]; 
    const ok=user===correct;
    wrap.className="review-item"; 
    const exp = EXPLAINS[i+1]?`<div class="ans-line">‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•: ${EXPLAINS[i+1]}</div>`:"";
    wrap.innerHTML=`<div><strong>${i+1}. [${item.cat}]</strong> ${item.q} <span class="badge ${ok?'good':'bad'}">${ok?'‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á':'‡∏ú‡∏¥‡∏î'}</span></div>
    <div class="ans-line">‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å: ${user!=null? (letter(user)+") "+item.c[user]) : "‚Äî ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å ‚Äî"}</div>
    <div class="ans-line">‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å: ${letter(correct)}) ${item.c[correct]}</div>${exp}`;
    reviewPanel.appendChild(wrap);
  }); 
  show(reviewPanel); window.scrollTo({top:reviewPanel.offsetTop-80, behavior:"smooth"});
});
btnRestart.addEventListener("click",()=>{ 
  for(let i=0;i<answers.length;i++) answers[i]=null; 
  hide(screenResult); show(screenStart); 
  reviewPanel.classList.add("hidden"); reviewPanel.innerHTML=""; 
  passText.classList.add("hidden"); failText.classList.add("hidden"); 
  bar.style.width="0%"; window.scrollTo({top:0, behavior:"smooth"});
});
</script>
</body>
</html>
